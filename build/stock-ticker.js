/**
 * @license text 2.0.15 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/text/LICENSE
 */
define("text",["module"],function(e){function n(e,n){return void 0===e||""===e?n:e}function t(e,t,r,i){if(t===i)return!0;if(e===r){if("http"===e)return n(t,"80")===n(i,"80");if("https"===e)return n(t,"443")===n(i,"443")}return!1}var r,i,o,a,s,c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,p="undefined"!=typeof location&&location.href,d=p&&location.protocol&&location.protocol.replace(/\:/,""),f=p&&location.hostname,h=p&&(location.port||void 0),g={},k=e.config&&e.config()||{};return r={version:"2.0.15",strip:function(e){if(e){e=e.replace(l,"");var n=e.match(u);n&&(e=n[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:k.createXhr||function(){var e,n,t;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(n=0;n<3;n+=1){t=c[n];try{e=new ActiveXObject(t)}catch(e){}if(e){c=[t];break}}return e},parseName:function(e){var n,t,r,i=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return o!==-1&&(!a||o>1)?(n=e.substring(0,o),t=e.substring(o+1)):n=e,r=t||n,o=r.indexOf("!"),o!==-1&&(i="strip"===r.substring(o+1),r=r.substring(0,o),t?t=r:n=r),{moduleName:n,ext:t,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,o){var a,s,c,l=r.xdRegExp.exec(e);return!l||(a=l[2],s=l[3],s=s.split(":"),c=s[1],s=s[0],(!a||a===n)&&(!s||s.toLowerCase()===i.toLowerCase())&&(!c&&!s||t(a,c,n,o)))},finishLoad:function(e,n,t,i){t=n?r.strip(t):t,k.isBuild&&(g[e]=t),i(t)},load:function(e,n,t,i){if(i&&i.isBuild&&!i.inlineText)return void t();k.isBuild=i&&i.isBuild;var o=r.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),c=k.useXhr||r.useXhr;
//!strip part to avoid file system issues.
return 0===s.indexOf("empty:")?void t():void(!p||c(s,d,f,h)?r.get(s,function(n){r.finishLoad(e,o.strip,n,t)},function(e){t.error&&t.error(e)}):n([a],function(e){r.finishLoad(o.moduleName+"."+o.ext,o.strip,e,t)}))},write:function(e,n,t,i){if(g.hasOwnProperty(n)){var o=r.jsEscape(g[n]);t.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,t,i,o){var a=r.parseName(n),s=a.ext?"."+a.ext:"",c=a.moduleName+s,l=t.toUrl(a.moduleName+s)+".js";r.load(c,t,function(n){var t=function(e){return i(l,e)};t.asModule=function(e,n){return i.asModule(e,l,n)},r.write(e,c,t,o)},o)}},"node"===k.env||!k.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),r.get=function(e,n,t){try{var r=i.readFileSync(e,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),n(r)}catch(e){t&&t(e)}}):"xhr"===k.env||!k.env&&r.createXhr()?r.get=function(e,n,t,i){var o,a=r.createXhr();if(a.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),i[o]);k.onXhr&&k.onXhr(a,e),a.onreadystatechange=function(r){var i,o;4===a.readyState&&(i=a.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=a,t&&t(o)):n(a.responseText),k.onXhrComplete&&k.onXhrComplete(a,e))},a.send(null)}:"rhino"===k.env||!k.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?r.get=function(e,n){var t,r,i="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),c="";try{for(t=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&t.append(r);null!==(r=s.readLine());)t.append(a),t.append(r);c=String(t.toString())}finally{s.close()}n(c)}:("xpconnect"===k.env||!k.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,a=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in o,r.get=function(e,n){var t,r,i,c={};s&&(e=e.replace(/\//g,"\\")),i=new FileUtils.File(e);try{t=o["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),t.init(i,1,0,!1),r=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),r.init(t,"utf-8",t.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(t.available(),c),r.close(),t.close(),n(c.value)}catch(e){throw new Error((i&&i.path||"")+": "+e)}}),r}),define("text!Views/StockTicker.html",[],function(){return'<div>\r\n    <h1>ASP.NET SignalR Stock Ticker Sample</h1>\r\n\r\n    <input type="button" id="open" value="Open Market" />\r\n    <input type="button" id="close" value="Close Market" disabled="disabled" />\r\n    <input type="button" id="reset" value="Reset" />\r\n\r\n    <h2>Live Stock Table</h2>\r\n    <div id="stockTable">\r\n        <table border="1">\r\n            <thead>\r\n                <tr>\r\n                    <th>Symbol</th>\r\n                    <th>Price</th>\r\n                    <th>Open</th>\r\n                    <th>High</th>\r\n                    <th>Low</th>\r\n                    <th>Change</th>\r\n                    <th>%</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr class="loading">\r\n                    <td colspan="7">loading...</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <h2>Live Stock Ticker</h2>\r\n    <div id="stockTicker">\r\n        <div class="inner">\r\n            <ul>\r\n                <li class="loading">loading...</li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div>\r\n        <button type="button" data-bind="click: goHome">go list !</button>\r\n    </div>\r\n</div>'}),define("signalr.hubs",["jquery","signalr.core"],function(e){function n(n,t){return function(){t.apply(n,e.makeArray(arguments))}}function t(t,r){var i,o,a,s,c;for(i in t)if(t.hasOwnProperty(i)){if(o=t[i],!o.hubName)continue;c=r?o.on:o.off;for(a in o.client)if(o.client.hasOwnProperty(a)){if(s=o.client[a],!e.isFunction(s))continue;c.call(o,a,n(o,s))}}}if("function"!=typeof e.signalR)throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.");var r=e.signalR;e.hubConnection.prototype.createHubProxies=function(){var n={};return this.starting(function(){t(n,!0),this._registerSubscribedHubs()}).disconnected(function(){t(n,!1)}),n.stockTicker=this.createHubProxy("stockTicker"),n.stockTicker.client={},n.stockTicker.server={closeMarket:function(){return n.stockTicker.invoke.apply(n.stockTicker,e.merge(["CloseMarket"],e.makeArray(arguments)))},getAllStocks:function(){return n.stockTicker.invoke.apply(n.stockTicker,e.merge(["GetAllStocks"],e.makeArray(arguments)))},getMarketState:function(){return n.stockTicker.invoke.apply(n.stockTicker,e.merge(["GetMarketState"],e.makeArray(arguments)))},openMarket:function(){return n.stockTicker.invoke.apply(n.stockTicker,e.merge(["OpenMarket"],e.makeArray(arguments)))},reset:function(){return n.stockTicker.invoke.apply(n.stockTicker,e.merge(["Reset"],e.makeArray(arguments)))}},n},r.hub=e.hubConnection(window.apiDomain+"/signalr",{useDefaultPath:!1}),e.extend(r,r.hub.createHubProxies())}),define("Scripts/App/signalR.StockTicker",["jquery","text!Views/StockTicker.html","signalr.hubs"],function(e,n){function t(n){function t(n){return e.extend(n,{Price:n.Price.toFixed(2),PercentChange:(100*n.PercentChange).toFixed(2)+"%",Direction:0===n.Change?"":n.Change>=0?c:l,DirectionClass:0===n.Change?"even":n.Change>=0?"up":"down"})}function r(){var e=h.width();h.css({marginLeft:e}),h.animate({marginLeft:-e},15e3,"linear",r)}function i(){h.stop()}function o(){return s.server.getAllStocks().done(function(n){p.empty(),h.empty(),e.each(n,function(){var e=t(this);p.append(d.supplant(e)),h.append(g.supplant(e))})})}var a=this,s=e.connection.stockTicker,c="▲",l="▼",u=e("#stockTable"),p=u.find("tbody"),d='<tr data-symbol="{Symbol}"><td>{Symbol}</td><td>{Price}</td><td>{DayOpen}</td><td>{DayHigh}</td><td>{DayLow}</td><td><span class="dir {DirectionClass}">{Direction}</span> {Change}</td><td>{PercentChange}</td></tr>',f=e("#stockTicker"),h=f.find("ul"),g='<li data-symbol="{Symbol}"><span class="symbol">{Symbol}</span> <span class="price">{Price}</span> <span class="change"><span class="dir {DirectionClass}">{Direction}</span> {Change} ({PercentChange})</span></li>';e.extend(s.client,{updateStockPrice:function(n){var r=t(n),i=e(d.supplant(r)),o=e(g.supplant(r)),a=n.LastChange<0?"255,148,148":"154,240,117";p.find("tr[data-symbol="+n.Symbol+"]").replaceWith(i),h.find("li[data-symbol="+n.Symbol+"]").replaceWith(o),i.flash(a,1e3),o.flash(a,1e3)},marketOpened:function(){e("#open").prop("disabled",!0),e("#close").prop("disabled",!1),e("#reset").prop("disabled",!0),r()},marketClosed:function(){e("#open").prop("disabled",!1),e("#close").prop("disabled",!0),e("#reset").prop("disabled",!1),i()},marketReset:function(){return o()}}),a.goHome=function(){e.connection.hub.stop(),location.hash=""},e.connection.hub.start().then(o).then(function(){return s.server.getMarketState()}).done(function(n){"Open"===n?s.client.marketOpened():s.client.marketClosed(),e("#open").click(function(){s.server.openMarket()}),e("#close").click(function(){s.server.closeMarket()}),e("#reset").click(function(){s.server.reset()})})}return String.prototype.supplant||(String.prototype.supplant=function(e){return this.replace(/{([^{}]*)}/g,function(n,t){var r=e[t];return"string"==typeof r||"number"==typeof r?r:n})}),jQuery.fn.flash=function(e,n){this.css("backgroundColor","rgb("+e+")")},{viewModel:t,template:n}});